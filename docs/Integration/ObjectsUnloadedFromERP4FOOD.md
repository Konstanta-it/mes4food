# Объекты выгружаемые из ERP4FOOD

## Справочники

### Серии номенклатуры

Справочник **к2СерииНоменклатуры** загружается в справочник **СерииНоменклатуры** базы ERP

Сопоставление реквизитов объектов:

|Реквизит ERP4Food|Реквизит ERP|
|----------|---------|
|Ссылка|Ссылка|
|ЭтоГруппа|ЭтоГруппа|
|Владелец(Номенклатура)|ВидНоменклатуры = Номенклатура.ВидНоменклатуры|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Наименование|Наименование|
|Номер|Номер|
|ДатаВыпуска|ДатаПроизводства|
|ГоденДо|ГоденДо|

В правиле выгрузки указывается вид номенклатуры.

Правило выгрузки серий номенклатуры в ERP4FOOD:

[![1][1]][1]

Правило загрузки серий номенклатуры в ERP:

[![2][2]][2]

### Ресурсные спецификации

Справочник **к2РесурсныеСпецификацииДляОбменаСВнешнимиИБОбменДаннымиИБ** загружается в справочники **РесурсныеСпецификации** и **ЭтапыПроизводства** базы ERP

В справочнике **Ресурсные спецификации для обмена с внешними ИБ** указывается элемент справочника **Ресурсная спецификация**

[![19][19]][19]

Сопоставление реквизитов объектов **к2РесурсныеСпецификацииДляОбменаСВнешнимиИБОбменДаннымиИБ** и **РесурсныеСпецификации**:

|Реквизит ERP4Food|Реквизит ERP|
|----------|---------|
|Ссылка|Ссылка|
|ЭтоГруппа|ЭтоГруппа|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Наименование|Наименование|
|Родитель|Родитель|
|ОсновноеИзделиеНоменклатура|ОсновноеИзделиеНоменклатура|
|ОсновноеИзделиеКоличествоУпаковок|ОсновноеИзделиеКоличествоУпаковок|
|*(Этапы)*|МногоэтапныйПроизводственныйПроцесс = Этапы.Количество() > 1|
|НачалоДействия|НачалоДействия|
|КонецДействия|КонецДействия|
||Статус = ВРазработке|
||ТипПроизводственногоПроцесса = Сборка|
||ВариантНазначения = СписокНоменклатуры|
|ВыходныеИзделия.Номенклатура|ВыходныеИзделия.Номенклатура|
|ВыходныеИзделия.Количество|ВыходныеИзделия.КоличествоУпаковок|
|ВыходныеИзделия.КлючСвязиЭтапы|ВыходныеИзделия.Этап|
|ВыходныеИзделия.КлючСвязиЭтапы|ВыходныеИзделия.ЭтапРедактирование|
|ВыходныеИзделия.ДоляСтоимости|ВыходныеИзделия.ДоляСтоимости|
|МатериалыИУслуги.Номенклатура|МатериалыИУслуги.Номенклатура|
|МатериалыИУслуги.Количество|МатериалыИУслуги.КоличествоУпаковок|
|МатериалыИУслуги.КлючСвязиЭтапы|МатериалыИУслуги.Этап|
|МатериалыИУслуги.КлючСвязиЭтапы|МатериалыИУслуги.ЭтапРедактирование|
||МатериалыИУслуги.СпособПолученияМатериала = Обеспечивать|
|Этапы|Загрузка в ЭтапыПроизводства (Справочник)|

Сопоставление реквизитов объектов **к2РесурсныеСпецификацииДляОбменаСВнешнимиИБОбменДаннымиИБ** и **ЭтапыПроизводства**:

|Реквизит ERP4Food|Реквизит ERP|
|----------|---------|
|КлючСвязи|Ссылка|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Наименование|Наименование|
|Ссылка|Владелец|
|Подразделение|Подразделение|
||ПроизводствоНаСтороне = Ложь|
||ПланироватьРаботуВидовРабочихЦентров = Ложь|
|НомерЭтапа|НомерЭтапа|
|НомерСледующегоЭтапа|НомерСледующегоЭтапа|
||ЕдиницаИзмеренияПредварительногоБуфера = Минута|
||ЕдиницаИзмеренияЗавершающегоБуфера = Минута|

Ресурсная спецификация не должна быть помечена на удаление, в правиле выгрузки указывается статус спецификации.

Правило выгрузки ресурсных спецификаций в ERP4FOOD:

[![3][3]][3]

Правило загрузки ресурсных спецификаций в ERP:

[![4][4]][4]

## Документы

### Распоряжение на перемещение

Документ **к2РаспоряжениеНаПеремещение** загружается в документ **ПеремещениеТоваров** базы ERP

Сопоставление реквизитов объектов:

|Реквизит ERP4Food|Реквизит ERP|
|----------|---------|
|Ссылка|Ссылка|
|Дата|Дата|
||Номер = УстановитьНовыйНомер()|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Проведен|Проведен|
||Статус = Принято|
||ХозяйственнаяОперация = ПеремещениеТоваров|
|СкладОтправитель|СкладОтправитель|
|СкладПолучатель|СкладПолучатель|
||Организация = ПравилоЗагрузки.Организация|
|Товары.Номенклатура|Товары.Номенклатура|
|Товары.Количество|Товары.Количество|
|Товары.Номенклатура|Серии.Номенклатура|
|Товары.Количество|Серии.Количество|
|Товары.Серия|Серии.Серия|

В правиле выгрузки указывается дата, дата документа должна быть больше даты начала обмена в правиле выгрузки.

Склад отправитель и Склад получатель не должны быть привязаны к одному Складу внешних ИБ.

!!! attention ""

    При выгрузке склады подменяются на к2СкладыВнешнихИБОбменДаннымиИБ. Табличная часть Серии заполняется только строками, в которых заполнена серия. После загрузки сворачивается табличная часть Товары.

Правило выгрузки распоряжений на перемещение в ERP4FOOD:

[![5][5]][5]

Правило загрузки распоряжений на перемещение в ERP:

[![6][6]][6]

### Поступления молочного сырья

Документ **к2ПоступлениеМолочногоСырья** загружается в документ **ПриобретениеТоваровУслуг** базы ERP

Сопоставление реквизитов объектов:

|Реквизит ERP4Food|Реквизит ERP|
|----------|---------|
|Дата|Дата|
||Номер = УстановитьНовыйНомер()|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Проведен|Проведен|
|ТоварыЗаявлено.Поставщик|Контрагент|
||Партнер = Контрагент.Партнер|
|ТоварыВзаиморасчеты.Соглашение|Договор|
|ТоварыФакт.Склад|Склад|
||Валюта = Договор.ВалютаВзаиморасчетов|
||ВалютаВзаиморасчетов = Договор.ВалютаВзаиморасчетов|
||СпособДоставки = СиламиПоставщикаДоНашегоСклада|
||ХозяйственнаяОперация = ЗакупкаУПоставщика|
|Ссылка|_ПолученныйДокументСсылка|
||Организация = ПравилоЗагрузки.Организация|
||ВариантПриемкиТоваров = ПравилоЗагрузки.ВариантПриемкиТоваров|
||ЗакупкаПодДеятельность = ПравилоЗагрузки.ЗакупкаПодДеятельность|
||НалогообложениеНДС = ПравилоЗагрузки.НалогообложениеНДС|
|ТоварыФакт.Номенклатура|Товары.Номенклатура|
|ТоварыФакт.Серия|Товары.Серия|
|ТоварыФакт.ФизическийВес|Товары.Количество|
|ТоварыВзаиморасчеты.Цена|Товары.Цена|
|ТоварыФакт.Склад|Товары.Склад|
|ТоварыФакт.Номенклатура|Серии.Номенклатура|
|ТоварыФакт.Серия|Серии.Серия|
|ТоварыФакт.ФизическийВес|Серии.Количество|
|ТоварыФакт.Склад|Серии.Склад|

В правиле выгрузки указываются Организация и дата, дата документа должна быть больше даты начала обмена в правиле выгрузки. Статус документа равен Принято по стоимости.

!!! attention ""

    Создается столько документов, сколько разрезов Склад-Контрагент.

!!! attention ""

    Поиск уже созданных документов происходит по реквизиту _ПолученныйДокументСсылка, который равен ГУИДУ в ERP4Food

!!! attention ""

    При выгрузке склады подменяются на к2СкладыВнешнихИБОбменДаннымиИБ

!!! attention ""

    Связь табличных частей в ERP4Food по реквизиту КлючСвязиТоварыЗаявлено

!!! attention ""

    Документы, найденные по реквизиту _ПолученныйДокументСсылка, которые были загружены ранее, но не загружались в текущем обмене - помечаются на удаление

Правило выгрузки поступлений молочного сырья в ERP4FOOD:

[![7][7]][7]

Правило загрузки поступлений молочного сырья в ERP:

[![8][8]][8]

### Акт переработки

Документ **к2АктПереработки** загружается в документы **ПроизводствоБезЗаказа** и **ДвижениеПродукцииИМатериалов** базы ERP

Сопоставление реквизитов объектов **к2АктПереработки** и **ПроизводствоБезЗаказа**

|Реквизит ERP4Food|Реквизит ERP|
|----------|---------|
|Ссылка|Ссылка|
|Дата|Дата|
||Номер = УстановитьНовыйНомер()|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Проведен|Проведен|
|Подразделение|Подразделение|
||Организация = ПравилоЗагрузки.Организация|
||ВыпускПодДеятельность = ПравилоЗагрузки.ВыпускПодДеятельность|
||ВидЦены = ПравилоЗагрузки.ВидЦены|
||Валюта = ВидЦены.ВалютаЦены|
||ГруппировкаЗатрат = ПоДокументу|
|Выпуск.Номенклатура|ВыходныеИзделия.Номенклатура|
|Выпуск.Серия|ВыходныеИзделия.Серия|
|Выпуск.Количество|ВыходныеИзделия.Количество|
|Выпуск.Спецификация|ВыходныеИзделия.Спецификация|
||ВыходныеИзделия.НаправлениеВыпуска = ВыпускПродукцииНаСклад|
|Выпуск.СкладВнешнейИБ|ВыходныеИзделия.Получатель|
||ВыходныеИзделия.НомерГруппыЗатрат = 1|
|Выпуск.Номенклатура|ПобочныеИзделия.Номенклатура|
|Выпуск.Серия|ПобочныеИзделия.Серия|
|Выпуск.Количество|ПобочныеИзделия.Количество|
||ПобочныеИзделия.НаправлениеВыпуска = ВыпускПродукцииНаСклад|
|Выпуск.СкладВнешнейИБ|ПобочныеИзделия.Получатель|
||ПобочныеИзделия.НомерГруппыЗатрат = 1|
||ПобочныеИзделия.Подразделение = Подразделение|
|РаспределениеМатериалов.Номенклатура|МатериалыИРаботы.Номенклатура|
|РаспределениеМатериалов.Серия|МатериалыИРаботы.Серия|
|РаспределениеМатериалов.Количество|МатериалыИРаботы.Количество|
|РаспределениеМатериалов.СкладВнешнейИБ|МатериалыИРаботы.Склад|
||МатериалыИРаботы.НомерГруппыЗатрат = 1|
||МатериалыИРаботы.Подразделение = Подразделение|

!!! attention ""

    Если документ не помечен на удаление, то он проводится.

!!! attention ""

    Если номенклатура из строки выпуска имеет вид номенклатуры из Правила загрузки - виды номенклатуры с фиксированной стоимостью, то такая строка попадает в табличную часть побочные изделия, иначе в табличную часть выходные изделия

Сопоставление реквизитов объектов **к2АктПереработки** и **ДвижениеПродукцииИМатериалов**

|Реквизит ERP4Food|Реквизит ERP|
|----------|---------|
|Дата|Дата|
|Проведен|Проведен|
||ХозяйственнаяОперация = ПередачаМатериаловВКладовую|
|Ссылка|ДокументОснование|
|РаспределениеМатериалов.СкладВнешнейИБ|Отправитель|
|РабочийЦентр.Склады[0].Склад|Получатель|
||Организация = ПравилоЗагрузки.Организация|
||ВариантПриемкиТоваров = ПравилоЗагрузки.ВариантПриемкиТоваров|
|РаспределениеМатериалов.Номенклатура|Товары.Номенклатура|
|РаспределениеМатериалов.Серия|Товары.Серия|
|РаспределениеМатериалов.Количество|Товары.Количество|

!!! attention ""

    Создается столько документов, сколько складов в Акте переработки в табличной части Распределение материалов

!!! attention ""

    Поиск уже созданных документов происходит по реквизиту ДокументОснование, который равен документу ПроизводствоБезЗаказа

!!! attention ""

    При выгрузке склады подменяются на к2СкладыВнешнихИБОбменДаннымиИБ

!!! attention ""

    Документы, найденные по реквизиту ДокументОснование, которые были загружены ранее, но не загружались в текущем обмене - помечаются на удаление

В правиле выгрузки указываются подразделение рабочего центра и дата, дата документа должна быть больше даты начала обмена в правиле выгрузки.

Правило выгрузки актов переработки в ERP4FOOD:

[![9][9]][9]

Правило загрузки актов переработки в ERP:

[![10][10]][10]

### Инвентаризация

Документ **к2Инвентаризация** загружается в документ **ПересчетТоваров** базы ERP

Сопоставление реквизитов объектов:

|Реквизит ERP4Food|Реквизит ERP|
|----------|---------|
|Ссылка|Ссылка|
|Дата|Дата|
||Номер = УстановитьНовыйНомер()|
||_Отправитель = к2ОтправителиОбменДаннымиИБ
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Проведен|Проведен|
|Склад|Склад|
|Статус|Статус|
||УчетныеДанныеЗаполнены = Истина|
|Товары.Номенклатура|Товары.Номенклатура|
|Товары.Серия|Товары.Серия|
|Товары.КоличествоУчет|Товары.Количество|
|Товары.КоличествоФакт|Товары.КоличествоФакт|

В правиле выгрузки указывается дата, дата документа должна быть больше даты начала обмена в правиле выгрузки.

!!! attention ""

    При загрузке статус из ERP4Food *Запланировано* и *К выполнению* заменяется на *Подготовлено*

Правило выгрузки инвентаризаций в ERP4FOOD:

[![11][11]][11]

Правило загрузки инвентаризаций в ERP:

[![12][12]][12]

### Списание товаров

Документ **к2СписаниеТоваров** загружается в документ **ВнутреннееПотреблениеТоваров** базы ERP

Сопоставление реквизитов объектов:

|Реквизит ERP4Food|Реквизит ERP|
|----------|---------|
|Ссылка|Ссылка|
|Дата|Дата|
||Номер = УстановитьНовыйНомер()|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Проведен|Проведен|
|Склад|Склад|
|Подразделение|Подразделение|
|Основание|ДокументОснование|
||Организация = ПравилоЗагрузки.Организация|
||ВидЦены = ПравилоЗагрузки.ВидЦены|
||ХозяйственнаяОперация = СписаниеТоваровПоТребованию|
Товары.Номенклатура|Товары.Номенклатура|
Товары.Количество|Товары.Количество|
||Товары.АналитикаРасходов = ПравилоЗагрузки.АналитикаРасходов|
||Товары.СтатьяРасходов = ПравилоЗагрузки.СтатьяРасходов|
|Товары.Номенклатура|Серии.Номенклатура|
|Товары.Серия|Серии.Серия|
|Товары.Количество|Серии.Количество|

В правиле выгрузки указывается дата, дата документа должна быть больше даты начала обмена в правиле выгрузки.

!!! attention ""

    При выгрузке склады подменяются на к2СкладыВнешнихИБОбменДаннымиИБ

Правило выгрузки списаний товаров в ERP4FOOD:

[![13][13]][13]

Правило загрузки списаний товаров в ERP:

[![14][14]][14]

### Оприходование товаров

Документ **к2ОприходованиеТоваров** загружается в документ **ПрочееОприходованиеТоваров** базы ERP

Сопоставление реквизитов объектов:

|Реквизит ERP4Food|Реквизит ERP|
|----------|---------|
|Ссылка|Ссылка|
|Дата|Дата|
||Номер = УстановитьНовыйНомер()|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Проведен|Проведен|
||ХозяйственнаяОперация = ОприходованиеЗаСчетДоходов|
|Склад|Склад|
|Основание|ДокументОснование|
|Валюта|Валюта|
||Организация = ПравилоЗагрузки.Организация|
||ВидЦены = ПравилоЗагрузки.ВидЦены|
|Подразделение|Подразделение|
|Товары.Номенклатура|Товары.Номенклатура|
|Товары.Количество|Товары.Количество|
|Товары.Цена|Товары.Цена|
|Товары.Сумма|Товары.Сумма|
||Товары.СтатьяРасходовДоходов = ПравилоЗагрузки.СтатьяДоходов|
||Товары.АналитикаДоходов = ПравилоЗагрузки.АналитикаДоходов|
|Товары.Номенклатура|Серии.Номенклатура|
|Товары.Серия|Серии.Серия|
|Товары.Количество|Серии.Количество|

В правиле выгрузки указывается дата, дата документа должна быть больше даты начала обмена в правиле выгрузки.

!!! attention ""

    При выгрузке склады подменяются на к2СкладыВнешнихИБОбменДаннымиИБ

Правило выгрузки оприходований товаров в ERP4FOOD:

[![15][15]][15]

Правило загрузки оприходований товаров в ERP:

[![16][16]][16]

## Регистры

### Запрещенные для редактирования документы обмен данными ИБ

Данные из регистра сведений **к2ЗапрещенныеДляРедактированияДокументыОбменДаннымиИБ** загружаются в регистр сведений **к2ЗапрещенныеДляРедактированияДокументыОбменДаннымиИБ** базы ERP

Сопоставление реквизитов объектов:

|Реквизит ERP4Food|Реквизит ERP|
|----------|---------|
|ОбъектИБ|ОбъектИБ|
|ДатаЗапрета|ДатаЗапрета|

Для объектов, полученных из внешней ИБ.

Правило выгрузки запрещенных для редактирования документов в ERP4FOOD:

[![17][17]][17]

Правило загрузки запрещенных для редактирования документов в ERP:

[![18][18]][18]

[1]: ObjectsUnloadedFromERP4FOOD.assets/1.png
[2]: ObjectsUnloadedFromERP4FOOD.assets/2.png
[3]: ObjectsUnloadedFromERP4FOOD.assets/3.png
[4]: ObjectsUnloadedFromERP4FOOD.assets/4.png
[5]: ObjectsUnloadedFromERP4FOOD.assets/5.png
[6]: ObjectsUnloadedFromERP4FOOD.assets/6.png
[7]: ObjectsUnloadedFromERP4FOOD.assets/7.png
[8]: ObjectsUnloadedFromERP4FOOD.assets/8.png
[9]: ObjectsUnloadedFromERP4FOOD.assets/9.png
[10]: ObjectsUnloadedFromERP4FOOD.assets/10.png
[11]: ObjectsUnloadedFromERP4FOOD.assets/11.png
[12]: ObjectsUnloadedFromERP4FOOD.assets/12.png
[13]: ObjectsUnloadedFromERP4FOOD.assets/13.png
[14]: ObjectsUnloadedFromERP4FOOD.assets/14.png
[15]: ObjectsUnloadedFromERP4FOOD.assets/15.png
[16]: ObjectsUnloadedFromERP4FOOD.assets/16.png
[17]: ObjectsUnloadedFromERP4FOOD.assets/17.png
[18]: ObjectsUnloadedFromERP4FOOD.assets/18.png
[19]: ObjectsUnloadedFromERP4FOOD.assets/19.png
