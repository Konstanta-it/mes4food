# Объекты выгружаемые из ERP

## Справочники

### Физические лица

Справочник **ФизическиеЛица** загружается в справочник **к2ФизическиеЛица** базы ERP4FOOD

Сопоставление реквизитов объектов:

|Реквизит ERP|Реквизит ERP4Food|
|----------|---------|
|Ссылка|Ссылка|
|ЭтоГруппа|ЭтоГруппа|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Родитель|Родитель|
|Наименование|Наименование|
|ФИО|ФИО|
||ФамилияИнициалы = Справочники.к2ФизическиеЛица.ФамилияИнициалыФизЛица(СправочникОбъект.ФИО)|
|КонтактнаяИнформация.Вид|КонтактнаяИнформация.Вид|
|КонтактнаяИнформация.Значение|КонтактнаяИнформация.Значение|

!!! attention ""

    В видах контактной информации должен быть заполнен *ИдентификаторДляФормул*. Для заполнения можно перезаписать вид - *ИдентификаторДляФормул* заполнится автоматически.

Правило выгрузки физических лиц в ERP:

[![1][1]][1]

Правило загрузки физических лиц в ERP4FOOD:

[![2][2]][2]

### Структура предприятия

Справочник **СтруктураПредприятия** загружается в справочник **Подразделения** базы ERP4FOOD

Сопоставление реквизитов объектов:

|Реквизит ERP|Реквизит ERP4Food|
|----------|---------|
|Ссылка|Ссылка|
|ЭтоГруппа|ЭтоГруппа|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Родитель|Родитель|
|Наименование|Наименование|

Правило выгрузки структуры предприятия в ERP:

[![3][3]][3]

Правило загрузки подразделений в ERP4FOOD:

[![4][4]][4]

### Склады

Справочник **Склады** загружается в справочник **к2СкладыВнешнихИБОбменДаннымиИБ** базы ERP4FOOD

Сопоставление реквизитов объектов:

|Реквизит ERP|Реквизит ERP4Food|
|----------|---------|
|Ссылка|Ссылка|
|ЭтоГруппа|ЭтоГруппа|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Родитель|Родитель|
|Наименование|Наименование|
||ТипВнешнейИБ = ерп|

В правилах выгрузки указываются подразделения склада.

Правило выгрузки складов в ERP:

[![5][5]][5]

Правило загрузки складов в ERP4FOOD:

[![6][6]][6]

После загрузки в ERP4FOOD в справочнике **Склады внешних ИБ** надо указать **Склады**:

[![23][23]][23]

### Контрагенты

Справочник **Контрагенты** загружается в справочник **Контрагенты** базы ERP4FOOD

Сопоставление реквизитов объектов:

|Реквизит ERP|Реквизит ERP4Food|
|----------|---------|
|Ссылка|Ссылка|
|ЭтоГруппа|ЭтоГруппа|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Наименование|Наименование|
|ИНН|ИНН|
|КПП|КПП|
|КодПоОКПО|КодПоОКПО|
|ЮрФизЛицо|ЮрФизЛицо|
|Поставщик|Поставщик|
|Клиент|Покупатель|
||Тип = ЛокальнаяТочка|

Правило выгрузки контрагентов в ERP:

[![7][7]][7]

Правило загрузки контрагентов в ERP4FOOD:

[![8][8]][8]

### Договоры контрагентов

Справочник **ДоговорыКонтрагентов** загружается в справочник **к2СоглашенияСКлиентами** базы ERP4FOOD

Сопоставление реквизитов объектов:

|Реквизит ERP|Реквизит ERP4Food|
|----------|---------|
|Ссылка|Ссылка|
|ЭтоГруппа|ЭтоГруппа|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Наименование|Наименование|
|НаименованиеДляПечати|НаименованиеДляПечати|
|Контрагент|Контрагент|
|ДатаНачалаДействия|ДатаНачалаДействия|
|ДатаОкончанияДействия|ДатаОкончанияДействия|
|ТипДоговора|ВидСоглашения|
||Налогообложение = ОблагаетсяНДС|
||Статус = Действует|
|ВалютаВзаиморасчетов|Валюта|
|ВалютаВзаиморасчетов|ВалютаВзаиморасчетов|
||ПорядокРасчетов = ПоНакладным|
||Организация = ПравилоЗагрузки.Организация|
||ВидЦен = ПравилоЗагрузки.ВидЦен|
||ГрафикОплаты = ПравилоЗагрузки.ГрафикОплаты|

В правиле выгрузки указываются типы выгружаемых договоров, статус договора = Действует.

Правило выгрузки договоров с контрагентами в ERP:

[![9][9]][9]

Правило загрузки договоров с контрагентами в ERP4FOOD:

[![10][10]][10]

### Номенклатура

Справочник **Номенклатура** загружается в справочник **Номенклатура** базы ERP4FOOD

Сопоставление реквизитов объектов:

|Реквизит ERP|Реквизит ERP4Food|
|----------|---------|
|Ссылка|Ссылка|
|ЭтоГруппа|ЭтоГруппа|
||Код = УстановитьНовыйКод()|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Родитель|Родитель|
|Наименование|Наименование|
||ВидНоменклатуры = ПравилоЗагрузки.ВидНоменклатуры|
|НаименованиеПолное|НаименованиеПолное|
|Артикул|Артикул|
|ВесЕдиницаИзмерения|ВесЕдиницаИзмерения|
|ЕдиницаИзмерения|ЕдиницаИзмерения|
||ИспользованиеДопЕдиницИзмерения = НеИспользовать|
|ТипНоменклатуры|ТипНоменклатуры|
|СрокГодности|СрокГодности|
|ЕдиницаИзмеренияСрокаГодности|ПериодичностьСрокаГодности|
|СтавкаНДС|СтавкаНДС|
|ИспользоватьУпаковки|ИспользоватьУпаковки|
||НаборУпаковок = ИндивидуальныйДляНоменклатуры (если ИспользоватьУпаковки = Истина)|
||ТоварнаяКатегория = ПравилоЗагрузки.ТоварнаяКатегория|

В правилах выгрузки указывается вид номенклатуры.

!!! attention ""

    Поиск единиц изменения осуществляется по коду. Если не найдена - подгружается из классификатора по коду ОКЕИ

!!! attention ""

    При загрузке, если ЕдиницаИзмерения = Штука, то она подменяется на Килограммы и создается упаковка для Штуки

Правило выгрузки номенклатуры в ERP:

[![11][11]][11]

Правило загрузки номенклатуры в ERP4FOOD:

[![12][12]][12]

### Упаковки

Справочник **УпаковкиЕдиницыИзмерения** загружается в справочник **УпаковкиЕдиницыИзмерения** базы ERP4FOOD

Сопоставление реквизитов объектов:

|Реквизит ERP|Реквизит ERP4Food|
|----------|---------|
|Ссылка|Ссылка|
|ЭтоГруппа|ЭтоГруппа|
||Код = УстановитьНовыйКод()|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Владелец|Владелец|
|Родитель|Родитель|
|Наименование|Наименование|
|Вес|Вес|
|ВесЕдиницаИзмерения|ВесЕдиницаИзмерения|
|Числитель|Числитель|
|Знаменатель|Знаменатель|
|КоличествоУпаковок|КоличествоУпаковок|
|ЕдиницаИзмерения|ЕдиницаИзмерения|
||ТипИзмеряемойВеличины = Упаковка|
||ТипУпаковки = Конечная|

В правилах выгрузки указывается вид номенклатуры.

!!! attention ""

    Поиск единиц изменения осуществляется по коду. Если не найдена - подгружается из классификатора по коду ОКЕИ

Правило выгрузки упаковок номенклатуры в ERP:

[![13][13]][13]

Правило загрузки упаковок номенклатуры в ERP4FOOD:

[![14][14]][14]

## Документы

### Перемещение товаров

Документ **ПеремещениеТоваров** загружается в документ **к2РаспоряжениеНаПеремещение** базы ERP4FOOD

Сопоставление реквизитов объектов:

|Реквизит ERP|Реквизит ERP4Food|
|----------|---------|
|Ссылка|Ссылка|
|Дата|Дата|
||Номер = УстановитьНовыйНомер()|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Проведен|Проведен|
||Статус = Выполнено|
|СкладОтправитель (к2СкладыВнешнихИБОбменДаннымиИБ)|СкладОтправитель = к2СкладыВнешнихИБОбменДаннымиИБ.ОсновнойСклад|
|СкладПолучатель (к2СкладыВнешнихИБОбменДаннымиИБ)|СкладПолучатель = к2СкладыВнешнихИБОбменДаннымиИБ.ОсновнойСклад|
||СпособСоздания = ОбменДанными|
||ТипПеремещения = Перемещение|
|Дата|ФактическаяДатаПеремещения|
|Товары.Номенклатура|Товары.Номенклатура|
|Товары.Серия|Товары.Серия|
|Товары.Количество|Товары.Количество|
|Серии.Номенклатура|Товары.Номенклатура|
|Серии.Количество|Товары.Количество|
|Серии.Серия|Товары.Серия|

В правиле выгрузки указывается организация и дата. Дата документа должна быть больше даты начала обмена в правиле выгрузки. Статус выгружаемых документов - Принято.

!!! attention ""

    Загрузка табличной части *Товары* из табличной части *Серии* происходит следующим образом: среди уже загруженных строк ищется строка по Номенклатуре и пустой Серии. Если такая строка найдена, то она перезаполняется, если такая строка не найдена - добавляется новая

Правило выгрузки перемещения товаров в ERP:

[![15][15]][15]

Правило загрузки распоряжений на перемещение в ERP4FOOD:

[![16][16]][16]

### Заказ поставщику

Документ **ЗаказПоставщику** загружается в документ **ПоступлениеТоваровУслуг** базы ERP4FOOD

Сопоставление реквизитов объектов:

|Реквизит ERP|Реквизит ERP4Food|
|----------|---------|
|Ссылка|Ссылка|
|Дата|Дата|
||Номер = УстановитьНовыйНомер()|
||_Отправитель = к2ОтправителиОбменДаннымиИБ|
|Представление|_ОтправленныйОбъектПредставление|
|ПометкаУдаления|ПометкаУдаления|
|Проведен|Проведен|
|Организация|Организация|
|Контрагент|Поставщик|
|Склад(к2СкладыВнешнихИБОбменДаннымиИБ)|Склад = к2СкладыВнешнихИБОбменДаннымиИБ.ОсновнойСклад|
|Валюта|Валюта|
|ЖелаемаяДатаПоступления|ПлановаяДатаПоставки (Если не заполнена, то Дата)|
|ДатаПоДаннымПоставщика|ДатаНакладной|
|НомерПоДаннымПоставщика|НомерНакладной|
||Статус = НеПринято|
||СпособСоздания = ОбменДанными|
||Соглашение = УсловияПродаж.Соглашение|
|Товары.Номенклатура|ТоварыПлан.Номенклатура|
|Товары.Количество|ТоварыПлан.Количество|
|Товары.Цена|ТоварыПлан.Цена|
|Товары.СтавкаНДС|ТоварыПлан.СтавкаНДС|
|Товары.Сумма|ТоварыПлан.Сумма|
|Товары.СуммаНДС|ТоварыПлан.СуммаНДС|
|Товары.СуммаСНДС|ТоварыПлан.СуммаСНДС|
|Товары.СуммаРучнойСкидки|ТоварыПлан.СуммаСкидкиНаценки|
|Товары.ПроцентРучнойСкидки|ТоварыПлан.ПроцентСкидкиНаценки|

В правиле выгрузки указывается дата, дата документа должна быть больше даты начала обмена в правиле выгрузки. Статус выгружаемых документов - Подтвержден, хозяйственная операция - закупка у поставщика.

Правило выгрузки заказов поставщику в ERP:

[![17][17]][17]

Правило загрузки поступлений товаров в ERP4FOOD:

[![18][18]][18]

## Регистры

### Штрихкоды номенклатуры

Данные из регистра сведений **ШтрихкодыНоменклатуры** загружаются в регистр сведений **к2ШтрихкодыНоменклатуры** базы ERP4FOOD

Сопоставление реквизитов объектов:

|Реквизит ERP|Реквизит ERP4Food|
|----------|---------|
|Штрихкод|Штрихкод|
|Номенклатура|Номенклатура|
|Упаковка|Упаковка|

В правиле выгрузки указывается вид номенклатуры.

Правило выгрузки штрихкодов номенклатуры в ERP:

[![19][19]][19]

Правило загрузки штрихкодов номенклатуры в ERP4FOOD:

[![20][20]][20]

### Запрещенные для редактирования документы обмен данными ИБ

Данные из регистра сведений **к2ЗапрещенныеДляРедактированияДокументыОбменДаннымиИБ** загружаются в регистр сведений **к2ЗапрещенныеДляРедактированияДокументыОбменДаннымиИБ** базы ERP4FOOD

Сопоставление реквизитов объектов:

|Реквизит ERP|Реквизит ERP4Food|
|----------|---------|
|ОбъектИБ|ОбъектИБ|
|ДатаЗапрета|ДатаЗапрета|

Для объектов, полученных из внешней ИБ.

Правило выгрузки запрещенных для редактирования документов в ERP:

[![21][21]][21]

Правило загрузки запрещенных для редактирования документов в ERP4FOOD:

[![22][22]][22]

[1]: ObjectsUnloadedFromERP.assets/1.png
[2]: ObjectsUnloadedFromERP.assets/2.png
[3]: ObjectsUnloadedFromERP.assets/3.png
[4]: ObjectsUnloadedFromERP.assets/4.png
[5]: ObjectsUnloadedFromERP.assets/5.png
[6]: ObjectsUnloadedFromERP.assets/6.png
[7]: ObjectsUnloadedFromERP.assets/7.png
[8]: ObjectsUnloadedFromERP.assets/8.png
[9]: ObjectsUnloadedFromERP.assets/9.png
[10]: ObjectsUnloadedFromERP.assets/10.png
[11]: ObjectsUnloadedFromERP.assets/11.png
[12]: ObjectsUnloadedFromERP.assets/12.png
[13]: ObjectsUnloadedFromERP.assets/13.png
[14]: ObjectsUnloadedFromERP.assets/14.png
[15]: ObjectsUnloadedFromERP.assets/15.png
[16]: ObjectsUnloadedFromERP.assets/16.png
[17]: ObjectsUnloadedFromERP.assets/17.png
[18]: ObjectsUnloadedFromERP.assets/18.png
[19]: ObjectsUnloadedFromERP.assets/19.png
[20]: ObjectsUnloadedFromERP.assets/20.png
[21]: ObjectsUnloadedFromERP.assets/21.png
[22]: ObjectsUnloadedFromERP.assets/22.png
[23]: ObjectsUnloadedFromERP.assets/23.png
