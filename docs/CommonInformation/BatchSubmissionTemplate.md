# Шаблон дополнительного представления партии


**Шаблон дополнительного представления партии** устанавливается в **виде номенклатуры** и используется в **рабочем месте мастера смены**. Он позволяет видеть данные о **результатах анализов партии** в таблицах **"Задания"** и **"Остатки"**. В качестве шаблона представления используются элементы справочника **"Формулы"**.

 

 
## Формулы

-   Чтобы создать **формулу**, нужно открыть справочник **"Формулы"** в разделе **"Производство"**:
    ![image-01](BatchSubmissionTemplate.assets/image-01.png)
    
-   Далее нужно создать новый элемент справочника и указать **"Наименование"**:
    ![image-02](BatchSubmissionTemplate.assets/image-02.png)

-   В поле **"Назначение формулы"** установить значение **"Дополнительное представление партии"**:
  
    ![image-03](BatchSubmissionTemplate.assets/image-03.png)
    
-   **Формулу** необходимо ввести в выделенное поле:
    ![image-04](BatchSubmissionTemplate.assets/image-04.png)
    
-   Для добавления в **формулу** **идентификатора**, по которому будет получено значение анализа, необходимо дважды щелкнуть по **искомому полю анализа** в **таблице операндов**, после чего в конец введенной **формулы** добавится **идентификатор**:
    
    ![image-05](BatchSubmissionTemplate.assets/image-05.png)
    
-   **Текст**, добавляемый, в **формулу**, должен выделяться кавычками с обеих сторон:
    ![image-06](BatchSubmissionTemplate.assets/image-06.png)

-   Для соединения в **формуле** **идентификаторов** и **введенного текста** необходимо использовать знак сложения:
    ![image-07](BatchSubmissionTemplate.assets/image-07.png)

-   **Формула** должна начинаться с текстового слагаемого. Чтобы **формула** начиналась с числового значения, его необходимо преобразовать в текст при помощи оператора **"ПреобразоватьВСтроку"**. Данный оператор можно добавить из **таблицы операторов** двойным щелком:
    ![image-08](BatchSubmissionTemplate.assets/image-08.png)

    
-   При сложении **числовых значений** с **текстовыми значениями** происходит неявное преобразование чисел в текст, поэтому **арифметические операции** производимые с **числовыми значениями** должны быть заключены в **круглые скобки**. Таким образом, сначала будут выполнены **операции над числами** (сложение, вычитание, деление и т.д.), а потом добавление полученного числового значения к текстовому:
    ![image-09](BatchSubmissionTemplate.assets/image-09.png)
    
-   Для проверки введенной формулы, необходимо нажать на кнопку **"Проверить формулу"**. Результат проверки можно увидеть в поле **"Результат"**:
    ![image-10](BatchSubmissionTemplate.assets/image-10.png)
        
-   Если при введении формулы была допущена ошибка, то при проверке будет выведено соответствующее окно:
    ![image-11](BatchSubmissionTemplate.assets/image-11.png)
    
-   Для проверки результатов вычисления на тестовых данных, можно задать **значения** в **таблице операндов**:
    ![image-12](BatchSubmissionTemplate.assets/image-12.png)

-   Для дальнейшего примера будет использована следующая **формула**:
    ![image-13](BatchSubmissionTemplate.assets/image-13.png)
    
## Виды номенклатуры

Теперь нужно указать созданную формулу в **качестве шаблона дополнительного представления** в справочнике **"Виды номенклатуры"**.

-   Переходим в **"Классификаторы номенклатуры"** в разделе **"Нормативно-справочная информация"**:
    ![image-14](BatchSubmissionTemplate.assets/image-14.png)

-   В открывшейся форме нажимаем на гиперссылку **"Виды номенклатуры"**:
    ![image-15](BatchSubmissionTemplate.assets/image-15.png)

-   Переходим к элементу для которого нужно установить шаблон. В форме элемента указываем **"Шаблон представления"** в разделе **"Шаблоны"**:
    ![image-16](BatchSubmissionTemplate.assets/image-16.png)

## Рабочее место мастера смены

-   После этого в **рабочем месте мастера смены** в таблицах **"Задания"** и **"Остатки"** **партии** будут отображаться с дополнительным представлением:
    ![image-17](BatchSubmissionTemplate.assets/image-17.png)

-   Результаты анализов для **дополнительного представления** берутся на **дату смены** указанную в **настройках**:
    ![image-18](BatchSubmissionTemplate.assets/image-18.png)

-   Если на **указанную дату смены** отсутствуют **анализы партии**, то **дополнительное представление** будет отображаться с пустыми **значениями показателей**:
    ![image-19](BatchSubmissionTemplate.assets/image-19.png)